S1에서 작업중
GPO 그룹정책 구성 요소
GPO : 	
	.그룹 정책 설정의 묶음
	.사용자 또는 컴퓨터 모두에 적용 될 수 있다.
[컴퓨터에 대한 권한 - 사용자에 관계없이 그 컴퓨터 에서는 아무도 못함.]
[사용자에 대한 권한 - 사용자가 어딜 가든 못함.]

AD 그룹 정책

Active Directory 그룹 정책

[기본 개념들]

-GPO: 정책 설정의 묶음.
-기본적으로 약 2400여개 (업데이트하면 더 늘어난다.) NT6.0 기준(2008 server)
-OS에 따라, 서비스팩 버전에 따라 적용할수 있는 정책이 달라진다.
-도메인 전체에 걸수있고 OU별로 걸수 있다.
-"그룹 정책 개체"에 저장되고 링크되는 방식이다.
-레지스트리 정보를 강제로 수정한다.
-모든 윈도우 기능은 관리할수 없다.(스크립트로..)
-한번 만든것은 다른 곳에서도 사용할수 있다. 
-컴퓨터가 켜질때 컴퓨터 정책, 로그인할때 사용자 정책 적용.
-기본적으로 90분~120분 마다 정책을 받아온다.
  -GPO우클릭 -> 편집 -> 컴퓨터구성-> 정책 -> 관리템플릿 -> 
    시스템 -> 그룹정책 -> 새로고침 간격 
-정책은 누적되고, 상속된다.( 단 마지막에 적용한 항목이 적용된다.)
  -Permission과 다른점은 강제 상속이 가능하다.



시작 - 관리도구 - 그룹정책관리
그룹 정책 개체 안에 GPO가 들어 있다.

!스크립트!
킬때, 끌때,로그오프,꺼지기 전


정책 만들고 , 링크 걸어서 준다.

서버 - Agent 관계로 정책 전파 (3000개 ... 관리 제한불가하다.)


클라이언트가 서버로 90~120분에 정책을 받으러 온다.
(90분 이후 30분 offset - 부하 분산 랜덤한 1초)
100% 받아가지 않는다. 
1. DC가 엄청 바쁠 때(정책 못 받을 수 있다)
2. Background 작업이라서 사용자가 바쁠 때 안가져 올 수 있다.
3. AD 날린 Black Edition
	[클릭 투 트윅 x]

msc : microsoftconsole
gpedit.msc 로컬 그룹 정책 편집기

Group Policy 처리 순서(우선순위 클 수록 높다.)
1. Local Group [가끔 씀]
2. Site [아얘 안씀]
3. Domain	[강제상속 우선순위 5]	
4. OU		[강제상속 우선순위 5]
충돌 내 가면서, 사용하여 원하는 결과를 내야 한다.








제어판 사용 금지 정책 만들기 control.exe 
gpmc.msc 
그름정책 관리
도메인 
 ㄴServer
   ㄴ그룹 정책 개체 - 새GPO [제어판 사용 금지 정책]
기본설정 - 권장사항으로 받고 - 필요시 언제든지 변경 가능
정책 	 - 관리 템플릿 - 제어판 [제어판의 액세스 금지] 우클릭 편집

정책 강제 업데이트 : gpupdate /force
90~120분 [30분 offset] 기다려야 하지만, 기다릴 수 없으니 강제 적용

S1
C:\>gpupdate /force [지금당장 정책을 게시하고 , 내가 반영할 것을 반영하겠다.

CL1
C:\>gpupdate /force [지금당장 DC에 가서 정책을 가져 오겠다.
정책을 업데이트하는 중...

사용자 정책 업데이트가 완료되었습니다.
컴퓨터 정책 업데이트가 완료되었습니다.








제어판 사용 정책
그룹 정책 관리
 ㄴ 도메인
    ㄴ그룹 정책 개체 
      ㄴ새로만들기 [제어판 정책] 우클릭 편집
	ㄴ 사용자 구성 - 정책 - 관리 템플릿 - 제어판 - 지정된 제어판 항목만 표시
		ㄴ 허용된 제어판 항목 목록 [표시]


강제상속 - 적용(mforce)

상속거부 - 우클릭 상속차단


상위 OU / 하위 OU  | 하위OU > 상위 OU


Software Release [소프트웨어 배포]

msi 가 설치파일이다.
근데 ms 라이선스 사야하는데, 라이선스가 비싸니까 exe 쓴다.

E\ 밑에 Software Release 권한 authenticated User 권한 읽기
$ 만들면 , 사용자에게 숨겨져서 보임.

소프트웨어 배포 정책 [편집]
 정책 - 소프트웨어 설정 - 소프트웨어 설치 
<컴퓨터 구성 - 할당만 됨 , 게시 못함>
<사용자 구성 - 게시 , 할당 가능 택 1> 
하고 나서 편집기 끄고, 부서에다가 소프트웨어 배포 정책 걸어줄 것.

할당은 리부팅하면 자동 설치
게시는 제어판 - 프로그램 그능에서 / 네트워크에서 프로그램 설치

http://www.delmaster.net/130
CD-KEY 종류
MAK	10~5000개 인증 가능 [MS 인증서버에서 인증 받는다.]
KMS	별도의 인증서버(회사 내 KMS 인증서버에서만 인증 가능하다.)
	장점 : CD-KEY 유출 되도 쓸모 없다.
	단점 : 물리적인 서버 구매해야 한다.
Retail 	소매점용 (한 3개? )



로그온 스크립트 만들기!! & 사용자가 접속 시 공유 폴더 불러오게 만드는 법

@echo off

net use z: "\\S1\강사부 자료실"



사용자가 접속 -> 로그온 스크립트 읽는다 -> 스크립트가 파일을 불러온다
사용자는 파일을 볼 수 있다.


1. 제어할 스크립트를 작성한다.
"강사부 로그온 스크립트.bat"
===============================
@echo off

net use z: "\\S1\강사부 자료실"

===============================

2. 그룹 정책 관리 - 그룹 정책 개체 - 새로만들기(강사부 로그온 스크립트) [편집]
	사용자 구성 - Windows 설정 - 스크립트(로그온/로그오프)
  우리는 로그온 시 처리할 꺼니까 로그온 클릭
 ㄴ 추가 - 찾아보기 들어가서 만들었던 스크립트 복붙한다.
\\Server.vm\SysVol\Server.vm\Policies\{41177A71-13F3-4F25-8325-53A813337321}\User\Scripts\Logon
경로는 뭐 .. 이렇다. 여기다 만들 bat 파일 복사 - 확인 
관리부 에다가 OU 정책 걸어주면 끝 

#S1
C:\>gpupdate /force
정책을 업데이트하는 중...

사용자 정책 업데이트가 완료되었습니다.
컴퓨터 정책 업데이트가 완료되었습니다.

#CL1 
server/t1 에서도 gpupdate /force 해주면 끝!


=============================================================

Default Domain Policy 기본 도메인 정책

계정 잠금 임계값

Kerberos 정책 - 동기화 시간 


NTP 서버 만들어서 같은 타임서버를 바라보게 해야 한다.














